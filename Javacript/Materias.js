const MateriasPorCarrera={

CyberSecurity: [    
{
    nombre: "Hacker etico",
    id: "hacker",
    horarios:[
     "Mar 8:00am - 12:00pm",
     "Jue 6:00pm - 10:00pm",
     "Vie 2:00pm - 6:00pm"

    ]
},
{
nombre: "Criptografia",
id: "Criptografia",
horarios:[
     "Lun 2:00pm - 6:00pm",
     "Mie 6:00pm - 10:00pm",
     "Vie 8:00am - 12:00pm"
]
},
{
nombre: "Seguridad de aplicaciones",
id: "SeguridadApps",
horarios: [
  "Mie 2:00pm - 5:00pm",
  "Jue 8:00am - 11:00am",
  "Vie 6:00pm - 9:00pm"
]
},
{
nombre: "Redes de datos",
id: "RedesD",
horarios: [
"Mie 8:00am - 10:00am",
"Jue 2:00pm - 4:00pm",
"Mar 6:00pm - 8:00pm"
]

},
{
nombre: "Informatica forense",
id: "InfoForense",
horarios:[
     "Lun 8:00am - 10:00am",
     "Mar 2:00pm - 4:00pm",
     "Vie 6:00pm - 8:00pm"
]
}
],
 
/*IA*/ 

IA: [    
{
    nombre: "Phyton",
    id: "phyton",
    horarios:[
     "Mar 8:00am - 12:00pm",
     "Jue 6:00pm - 10:00pm",
     "Vie 2:00pm - 6:00pm"

    ]
},
{
nombre: "Aprendisaje automatico",
id: "AprendisajeAuto",
horarios:[
     "Lun 2:00pm - 6:00pm",
     "Mie 6:00pm - 10:00pm",
     "Vie 8:00am - 12:00pm"
]
},
{
nombre: "Seminario",
id: "Seminario",
horarios: [
  "Mie 2:00pm - 5:00pm",
  "Jue 8:00am - 11:00am",
  "Vie 6:00pm - 9:00pm"
]
},
{
nombre: "Algebra matricial",
id: "AlgebraM",
horarios: [
"Mie 8:00am - 10:00am",
"Jue 2:00pm - 4:00pm",
"Mar 6:00pm - 8:00pm"
]

},
{
nombre: "Aprendisaje profundo",
id: "AprendisajeProf",
horarios:[
     "Lun 8:00am - 10:00am",
     "Mar 2:00pm - 4:00pm",
     "Vie 6:00pm - 8:00pm"
]
}
],
/*Multimedia */
Multimedia: [    
{
    nombre: "Fotografia",
    id: "foto",
    horarios:[
     "Mar 8:00am - 12:00pm",
     "Jue 6:00pm - 10:00pm",
     "Vie 2:00pm - 6:00pm"

    ]
},
{
nombre: "Marketing",
id: "marketing",
horarios:[
     "Lun 2:00pm - 6:00pm",
     "Mie 6:00pm - 10:00pm",
     "Vie 8:00am - 12:00pm"
]
},
{
nombre: "Ilustracion digital",
id: "IlustracionD",
horarios: [
  "Mie 2:00pm - 5:00pm",
  "Jue 8:00am - 11:00am",
  "Vie 6:00pm - 9:00pm"
]
},
{
nombre: "Animacion 2D",
id: "Animacion2D",
horarios: [
"Mie 8:00am - 10:00am",
"Jue 2:00pm - 4:00pm",
"Mar 6:00pm - 8:00pm"
]

},
{
nombre: "Audio digital",
id: "AudioD",
horarios:[
     "Lun 8:00am - 10:00am",
     "Mar 2:00pm - 4:00pm",
     "Vie 6:00pm - 8:00pm"
]
}
],

/*Redes */
Redes: [    
{
    nombre: "Fundamentos de seguridad",
    id: "FundamentosS",
    horarios:[
     "Mar 8:00am - 12:00pm",
     "Jue 6:00pm - 10:00pm",
     "Vie 2:00pm - 6:00pm"

    ]
},
{
nombre: "Redes inalambricas",
id: "RedesI",
horarios:[
     "Lun 2:00pm - 6:00pm",
     "Mie 6:00pm - 10:00pm",
     "Vie 8:00am - 12:00pm"
]
},
{
nombre: "Enrutamiento avanzado",
id: "EnrutamientoA",
horarios: [
  "Mie 2:00pm - 5:00pm",
  "Jue 8:00am - 11:00am",
  "Vie 6:00pm - 9:00pm"
]
},
{
nombre: "Introduccion al diseño de redes",
id: "IDR",
horarios: [
"Mie 8:00am - 10:00am",
"Jue 2:00pm - 4:00pm",
"Mar 6:00pm - 8:00pm"
]

},
{
nombre: "Base de datos",
id: "BD",
horarios:[
     "Lun 8:00am - 10:00am",
     "Mar 2:00pm - 4:00pm",
     "Vie 6:00pm - 8:00pm"
]
}
],

/*Software */
Software: [    
{
    nombre: "Programacion",
    id: "programacion",
    horarios:[
     "Mar 8:00am - 12:00pm",
     "Jue 6:00pm - 10:00pm",
     "Vie 2:00pm - 6:00pm"

    ]
},
{
nombre: "Programacion web",
id: "progWeb",
horarios:[
     "Lun 2:00pm - 6:00pm",
     "Mie 6:00pm - 10:00pm",
     "Vie 8:00am - 12:00pm"
]
},
{
nombre: "Big data",
id: "BigData",
horarios: [
  "Mie 2:00pm - 5:00pm",
  "Jue 8:00am - 11:00am",
  "Vie 6:00pm - 9:00pm"
]
},
{
nombre: "Diseño centrado al usuario",
id: "DCU",
horarios: [
"Mie 8:00am - 10:00am",
"Jue 2:00pm - 4:00pm",
"Mar 6:00pm - 8:00pm"
]

},
{
nombre: "Auditoria informatica",
id: "AuditoriaInfo",
horarios:[
     "Lun 8:00am - 10:00am",
     "Mar 2:00pm - 4:00pm",
     "Vie 6:00pm - 8:00pm"
]
}
],

}

//Materias y horarios.
document.addEventListener("DOMContentLoaded", function(){
    const contenedor=document.getElementById("ContenedorMaterias");
    const btnContinuar= document.querySelector(".btn-primary");

        const datosUsuario= JSON.parse(localStorage.getItem("datosUsuario"));
        if(!datosUsuario || !datosUsuario.carrera){
            contenedor.innerHTML= "<p class='text-danger'>No se encontro informacion de carrera seleccionada.</p>";
            return;
        }

        const materias= MateriasPorCarrera[datosUsuario.carrera];
        if(!materias){
            contenedor.innerHTML= "<p class='text-danger'> No se encontraron materias.</p>";
            return;
        }

        let html= `<div class="accordion" id="materiasAccordion">`;

        materias.forEach((materia, index)=>{
            const collapseId=  `${materia.id}_collapse`;
            const headingId= `${materia.id}_heading`;

            html +=`
            <div class="accordion-item mb-3">
            <h2 class="accordion-header" id="${headingId}">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#${collapseId}" aria-expanded="false" aria-controls="${collapseId}">
            ${materia.nombre}
            </button>
            </h2>

            <div id="${collapseId}" class="accordion-collapse collapse" aria-labelledby="${headingId}" data-bs-parent="#materias">
            <div class="accordion-body">
            `;

            materia.horarios.forEach((horario, i)=>{
                const inputId= `${materia.id}_${i}`;
                html +=`
                <div class="form-check">
                    <input type="radio" class="form-check-input" name="horario_${materia.id}" id="${inputId}" value="${horario}">
                    <label for="${inputId}" class="form-check-label">${horario}</label>
                </div>`;
            });
            html+=`
            </div>
            </div>
            </div>
            `;
        });

        html+=`</div>`;
        contenedor.innerHTML=html;


const seleccionadosPrevios = JSON.parse(localStorage.getItem("horariosSeleccionados")) || [];


seleccionadosPrevios.forEach(sel => {
    const materia = MateriasPorCarrera[datosUsuario.carrera].find(m => m.nombre === sel.Nombre);
    if (materia) {
        const radio = document.querySelector(`input[name="horario_${materia.id}"][value="${sel.horario}"]`);
        if (radio) {
            radio.checked = true;
        }
    }
});


        btnContinuar.addEventListener("click", ()=>{
           
            let horariosSeleccionados=[];
            MateriasPorCarrera[datosUsuario.carrera].forEach(materia=>{

            const nameInput= `horario_${materia.id}`;
            const seleccionado= document.querySelector(`input[name="${nameInput}"]:checked`)

            if(seleccionado){
                horariosSeleccionados.push({
                Nombre: materia.nombre,
                horario: seleccionado.value
            });
         
          }
          });
          
          if (horariosSeleccionados.length === 0) {
        alert("Debe seleccionar al menos una materia para poder continuar.");
        return;
        }


                localStorage.setItem("horariosSeleccionados", JSON.stringify(horariosSeleccionados));
                window.location.href="./Confirmacion.html";
            
        });
  
 });


